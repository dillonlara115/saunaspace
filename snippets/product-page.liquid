<script>
  $(document).ready(function() {
      console.log('prod running');
  setTimeout(
    function() { 
      $( $('.bcpo-title') ).each(function( i ) {
      if ( $(this).text() == "Plug Type:" ) {
          $(this).addClass('plug-' + i);
          $(this).text('Select your plug type:');
      } else if( $(this).text() == "Curtain Type:" || $(this).text() == "Type:" ) {
          $(this).text('Select your curtain type:');
          $( "<style>#bcpo .bcpo-dropdown { order: unset;} }</style>" ).appendTo( "head" );      
      } else if( $(this).text() == "Voltage:") {
        $(this).text('Select a Voltage.');
        $( "<style>#bcpo .bcpo-dropdown { order: unset;} }</style>" ).appendTo( "head" );      
      } else if( $(this).text() == "Size:") {
        $(this).text('Select a Size.');
        $( "<style>#bcpo .bcpo-dropdown { order: unset;} }</style>" ).appendTo( "head" );      
      }
  
  })}, 700);

});

function filterVariant(variant) {
  console.log('thumbnail updated ' + variant.alt);
  if(variant != null && variant.alt != null ) {
    $('[data-thumbnail-color]').hide();
    //show for selected color
    var selected_color = variant.alt;
    var general_color = "[data-thumbnail-color='general']";
    var thumbnail_selector = '[data-thumbnail-color="' + selected_color + '"]';
    $(thumbnail_selector).show();
    $(general_color).show();

    // $(thumbnail_selector).prependTo('.list-unstyled');
  } else {
    //show all
    $('[data-thumbnail-color]').show();
  }
}


// variant lead time metafield listener
function bcpoChange(currentVariant) {
    var variant_result = JSON.stringify(bcpo.variant.featured_image);
    this.filterVariant(bcpo.variant.featured_image);
    console.log('bcpo: ' + variant_result);
    console.log('featured iamge: ' + bcpo.variant.featured_image);
    const variants = document.querySelectorAll('[data-variant-id]')
  
    variants.forEach( function(variant) {
      //hide all variant descriptions
      variant.style.display = 'none';
      if(variant.dataset.variantId == bcpo.variant.id){
        //if current variant unhide the variant description
        variant.style.display = 'block'
      }
  });
}
</script>